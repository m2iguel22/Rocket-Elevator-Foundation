<!DOCTYPE html>
<html>
  <head>
    <style>
      #map {
   width: 100%;
   height: 400px;
   background-color: grey;
 }
    </style>
  </head>
  <body>
    <h1>Rocket Elevators Customers Geolocalisation</h1>

    <div id='map'></div>
    <script>
      function initMap(){
        var options = {
         zoom: 4,
          center: {
             lat: 46.842957,
             lng: -71.279663
          }
          
        } 
        
         var map = new google.maps.Map(document.getElementById('map'), options); 
        

         
          
          <% @marker_list.each do |location| %>
            var marker = new google.maps.Marker({
                position: {
                    lat: <%= location[:lat]%>, 
                    lng: <%= location[:lng]%>
                  },
                map: map,
                
                
                animation: google.maps.Animation.BOUNCE
            });
            
            marker.info = new google.maps.InfoWindow({
                content: '<strong>Address:</strong> <%= location[:number_and_street] %>, <%= location[:city] %>, <%= location[:country] %>, <%= location[:zip_code] %><br/><strong>Customer Name:</strong> <%= location[:name] %><br/><strong>Batteries Number:</strong> <%= location[:batteries] %><br/><strong>Columns Number:</strong> <%= location[:column] %><br/><strong>Elevator Number:</strong> <%= location[:elevator] %></br><strong>Contact Support:</strong> <%= location[:contact]%><br><strong>Weather:</strong> <%= raw(@wet['weather']) %>' 
            
                });
            var previous = null;
            marker.addListener('click', function() {
                if(previous) {
                    previous.close()
                }
                previous = this.info;
                this.info.open(map, this);
            });
                     






          <% end %>
      }  
             
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSs4eygoxzfx7M4vk1UagTMTjGWZfjby0&callback=initMap">
    </script>
  </body>
</html>